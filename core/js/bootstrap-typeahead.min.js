!function(t){"use strict";var e=function(e,a){this.$element=t(e);this.options=t.extend({},t.fn.typeahead.defaults,a);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.delay=typeof this.options.delay=="number"?this.options.delay:250;this.$menu=t(this.options.menu);this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"?this.options.showHintOnFocus:false};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");if(this.autoSelect||t){this.$element.val(this.updater(t)).change()}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),a;a=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;this.$menu.insertAfter(this.$element).css({top:e.top+e.height+a,left:e.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var a;if(typeof e!="undefined"&&e!==null){this.query=e}else{this.query=this.$element.val()||""}if(this.query.length<this.options.minLength){return this.shown?this.hide():this}var s=t.proxy(function(){a=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source;if(a){this.process(a)}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(s,this.delay)},process:function(e){var a=this;e=t.grep(e,function(t){return a.matcher(t)});e=this.sorter(e);if(!e.length){return this.shown?this.hide():this}if(this.options.items=="all"){return this.render(e).show()}else{return this.render(e.slice(0,this.options.items)).show()}},matcher:function(t){return~t.name.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){var e=[],a=[],s=[],i;while(i=t.shift()){if(!i.name.toLowerCase().indexOf(this.query.toLowerCase()))e.push(i);else if(~i.name.indexOf(this.query))a.push(i);else s.push(i)}return e.concat(a,s)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.name.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var a=this;e=t(e).map(function(e,s){e=t(a.options.item).data("value",s.id);e.find("a").html(a.highlighter(s));return e[0]});if(this.autoSelect){e.first().addClass("active")}this.$menu.html(e);return this},next:function(e){var a=this.$menu.find(".active").removeClass("active"),s=a.next();if(!s.length){s=t(this.$menu.find("li")[0])}s.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),a=e.prev();if(!a.length){a=this.$menu.find("li").last()}a.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",t.proxy(this.keydown,this))}this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.off("focus").off("blur").off("keypress").off("keyup");if(this.eventSupported("keydown")){this.$element.off("keydown")}this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;if(!e){this.$element.setAttribute(t,"return;");e=typeof this.$element[t]==="function"}return e},move:function(t){if(!this.shown)return;switch(t.keyCode){case 9:case 27:t.preventDefault();break;case 38:t.preventDefault();this.prev();break;case 40:t.preventDefault();this.next();break}t.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]);if(!this.shown&&e.keyCode==40){this.lookup("")}else{this.move(e)}},keypress:function(t){if(this.suppressKeyPressRepeat)return;this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation();t.preventDefault()},focus:function(t){if(!this.focused){this.focused=true;if(this.options.minLength===0&&!this.$element.val()||this.options.showHintOnFocus){this.lookup()}}},blur:function(t){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(t){t.stopPropagation();t.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");t(e.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var a=t.fn.typeahead;t.fn.typeahead=function(a){var s=arguments;return this.each(function(){var i=t(this),o=i.data("typeahead"),n=typeof a=="object"&&a;if(!o)i.data("typeahead",o=new e(this,n));if(typeof a=="string"){if(s.length>1){o[a].apply(o,Array.prototype.slice.call(s,1))}else{o[a]()}}})};t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:2,scrollHeight:0,autoSelect:false};t.fn.typeahead.Constructor=e;t.fn.typeahead.noConflict=function(){t.fn.typeahead=a;return this};t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var a=t(this);if(a.data("typeahead"))return;a.typeahead(a.data())})}(window.jQuery);